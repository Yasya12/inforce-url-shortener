import{a as v,b as n,c as w,d as y,e as x,f as S,g as C,h as F,i as L}from"./chunk-TXVCWUOQ.js";import{h as b,j as h}from"./chunk-IOW66UP7.js";import{D as s,Fa as c,J as p,X as m,Y as t,Z as o,_ as d,da as g,ia as r,o as i,wa as f}from"./chunk-EW4TTHCM.js";var E=class u{fb=i(F);authService=i(h);router=i(c);toastr=i(b);loginForm=this.fb.group({email:["",[n.required,n.email]],password:["",[n.required]]});errorMessage=null;onSubmit(){if(this.loginForm.invalid)return;let a={email:this.loginForm.get("email")?.value??"",password:this.loginForm.get("password")?.value??""};this.authService.login(a).subscribe({next:()=>{this.errorMessage=null,this.router.navigate(["/"])},error:e=>{this.toastr.error("Login failed. Please try again."),console.error("Login failed",e),this.errorMessage=e.error?.message||"Login failed. Please try again."}})}static \u0275fac=function(e){return new(e||u)};static \u0275cmp=p({type:u,selectors:[["app-login"]],decls:15,vars:2,consts:[[1,"flex","items-center","justify-center"],[1,"bg-white","p-8","rounded-lg","border","border-gray-100","shadow-md","w-full","max-w-md"],[1,"text-2xl","font-bold","text-center","mb-6","text-gray-800"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"mb-6"],["for","password",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","mb-3","leading-tight","focus:outline-none","focus:shadow-outline"],["type","submit",1,"w-full","bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Login"),o(),t(4,"form",3),g("ngSubmit",function(){return l.onSubmit()}),t(5,"div",4)(6,"label",5),r(7,"Email"),o(),d(8,"input",6),o(),t(9,"div",7)(10,"label",8),r(11,"Password"),o(),d(12,"input",9),o(),t(13,"button",10),r(14," Log In "),o()()()()),e&2&&(s(4),m("formGroup",l.loginForm),s(9),m("disabled",l.loginForm.invalid))},dependencies:[f,L,x,v,w,y,S,C],encapsulation:2})};export{E as LoginComponent};
